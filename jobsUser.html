<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lowongan Terbaru - Kreatoria</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap');
        :root {
            --bg-dark: #111827; --bg-medium: #1F2937; --bg-light: #374151;
            --text-primary: #F9FAFB; --text-secondary: #9CA3AF; --accent: #22D3EE;
            --navbar-height: 88px;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: var(--bg-dark); color: var(--text-primary); }
        .container { width: 90%; max-width: 1200px; margin: 0 auto; padding: 40px 0; }
        .page-header { text-align: center; padding: 60px 20px; background-color: var(--bg-medium); border-radius: 12px; margin-bottom: 40px;}
        .page-header h1 { font-size: 48px; }
        .page-header p { font-size: 18px; color: var(--text-secondary); max-width: 600px; margin: 10px auto 30px; }
        .job-card { background-color: var(--bg-medium); border-radius: 12px; padding: 25px; margin-bottom: 20px; border: 1px solid var(--bg-light); transition: border-color 0.3s ease, transform 0.3s ease; }
        .job-card:hover { border-color: var(--accent); transform: translateY(-5px); }
        .job-card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px; }
        .job-card-title { font-size: 22px; }
        .job-card-company { font-size: 16px; color: var(--text-secondary); margin-top: 5px; }
        .job-tags { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .job-tag { background-color: var(--bg-light); color: var(--text-secondary); font-size: 12px; font-weight: 700; padding: 5px 12px; border-radius: 20px; }
        .job-card-description { color: var(--text-secondary); line-height: 1.7; }
        .nav-button { padding: 8px 20px; border-radius: 8px; text-decoration: none; font-weight: 700; display: inline-block; }
        .nav-button-primary { background-color: var(--accent); color: var(--bg-dark); }
        .navbar { height: var(--navbar-height); padding: 0 5%; display: flex; justify-content: space-between; align-items: center; width: 100%; position: relative; border-bottom: 1px solid var(--bg-medium); }
        .logo { font-size: 24px; font-weight: 800; color: var(--text-primary); text-decoration: none; }
        .nav-links { display: flex; gap: 30px; }
        .nav-links a { color: var(--text-secondary); text-decoration: none; font-weight: 500; }
        .nav-links a.active { color: var(--text-primary); }
        .profile-dropdown { position: relative; }
        .profile-btn { display: flex; align-items: center; gap: 10px; background: none; border: none; cursor: pointer; }
        .profile-img { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; }
        .profile-name { color: var(--text-primary); font-weight: 600; }
        .dropdown-menu { display: none; position: absolute; top: 60px; right: 0; background-color: var(--bg-medium); border-radius: 8px; z-index: 110; min-width: 180px; }
        .dropdown-menu.show, .profile-dropdown:hover .dropdown-menu { display: block; }
        .dropdown-menu a { display: block; padding: 12px 20px; color: var(--text-secondary); }
        #logout-btn { color: #ef4444; }
        .footer { border-top:1px solid var(--bg-light); text-align:center; padding:40px 0; margin-top: 40px; }
        .footer p { color:var(--text-secondary); }
        
        .nav-icon-btn {
            position: relative;
            color: var(--text-primary);
            font-size: 20px;
            transition: color 0.3s ease;
            text-decoration: none;
        }
        .nav-icon-btn:hover {
            color: var(--text-secondary);
        }
        .nav-actions {
            display: flex;
            align-items: center;
            gap: 25px;
        }
        .notification-badge {
            position: absolute;
            top: -2px;
            right: -4px;
            width: 10px;
            height: 10px;
            background-color: #ef4444;
            border-radius: 50%;
            border: 2px solid var(--bg-medium);
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <a href="index1.html" class="logo">Kreatoria</a>
        <div class="nav-links">
            <a href="index1.html">Home</a>
            <a href="gallery-loggedin.html">Gallery</a>
            <a href="jobsUser.html" class="active">Jobs</a>
            <a href="about-loggedin.html">Eksplorasi Talenta</a>
        </div>
        <div class="nav-actions">
            <a href="notifikasi.html" class="nav-icon-btn">
                <i class="fas fa-bell"></i>
                <span class="notification-badge"></span>
            </a>
            <div class="profile-dropdown">
                <button class="profile-btn">
                    <img src="https://i.pravatar.cc/40" alt="Avatar" class="profile-img">
                    <span class="profile-name" id="user-display-name">User</span>
                </button>
                <div class="dropdown-menu">
                    <a href="my-profile.html">Profil Saya</a>
                    <a href="settings.html">Pengaturan</a>
                    <a href="chat.html">Pesan</a>
                    <a href="index.html" id="logout-btn">Logout</a>
                </div>
            </div>
        </div>
    </nav>
    
    <main>
        <div class="container">
            <header class="page-header">
                <h1>Temukan Peluang Karir Impianmu</h1>
                <p>Jelajahi ratusan lowongan pekerjaan dari perusahaan terkemuka yang mencari talenta kreatif sepertimu.</p>
            </header>
            
            <div id="job-list-container">
                </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container"><p>&copy; 2025 Kreatoria. Semua Hak Cipta Dilindungi.</p></div>
    </footer>

    <script src="auth.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const jobListContainer = document.getElementById('job-list-container');
            const newlyPostedJob = JSON.parse(localStorage.getItem('newlyPostedJob'));

            // Fungsi untuk membuat kartu lowongan (tetap ada untuk menangani lowongan baru)
            function createJobCard(jobData) {
                const tagsHTML = jobData.tags.map(tag => `<span class="job-tag">${tag}</span>`).join('');
                
                const deadlineDate = new Date(jobData.deadline);
                const formattedDeadline = deadlineDate.toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });

                return `
                <div class="job-card">
                    <div class="job-card-header">
                        <div>
                            <h2 class="job-card-title">${jobData.title}</h2>
                            <p class="job-card-company">${jobData.company} â€¢ ${jobData.location}</p>
                        </div>
                        <a href="detail-pekerjaan.html" class="nav-button nav-button-primary">Lihat Detail</a>
                    </div>
                    <div class="job-tags">
                        <span class="job-tag">${jobData.type}</span>
                        ${tagsHTML}
                        <span class="job-tag" style="background-color: var(--accent-dark); color: var(--text-primary);">Tenggat: ${formattedDeadline}</span>
                    </div>
                    <p class="job-card-description">${jobData.description}</p>
                </div>
                `;
            }

            // Inisialisasi array kosong untuk semua lowongan
            let allJobs = [];

            // Jika ada lowongan baru dari localStorage, tambahkan ke array
            if (newlyPostedJob) {
                allJobs.push(newlyPostedJob);
            }
            
            // Hapus data lowongan statis
            // const staticJobs = [...]; 

            // Kosongkan kontainer terlebih dahulu
            jobListContainer.innerHTML = '';

            // Periksa apakah ada lowongan untuk ditampilkan
            if (allJobs.length > 0) {
                // Jika ada, tampilkan
                allJobs.forEach(job => {
                    jobListContainer.insertAdjacentHTML('beforeend', createJobCard(job));
                });
            } else {
                // Jika tidak ada, tampilkan pesan
                jobListContainer.innerHTML = '<p style="color: var(--text-secondary); text-align: center;">Saat ini belum ada lowongan yang tersedia.</p>';
            }
        });
    </script>
</body>
</html>